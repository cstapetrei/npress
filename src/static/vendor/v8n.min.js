!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.v8n=t()}(this,function(){"use strict";var s=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}(),o=function(){function u(n,t,e,r){s(this,u),this.name=n,this.fn=t,this.args=e,this.modifiers=r}return n(u,[{key:"_test",value:function(n){var t=this.fn;try{c(this.modifiers.slice(),t)(n)}catch(n){t=function(){return!1}}try{return c(this.modifiers.slice(),t)(n)}catch(n){return!1}}},{key:"_check",value:function(n){try{c(this.modifiers.slice(),this.fn)(n)}catch(n){if(c(this.modifiers.slice(),function(n){return n})(!1))return}if(!c(this.modifiers.slice(),this.fn)(n))throw null}},{key:"_testAsync",value:function(r){var n=this;return new Promise(function(t,e){(function n(t,e){{if(t.length){var r=t.shift(),u=n(t,e);return r.performAsync(u)}return function(n){return Promise.resolve(i(e,"async")(n))}}})(n.modifiers.slice(),n.fn)(r).then(function(n){n?t(r):e(null)}).catch(function(n){return e(n)})})}}]),u}();function i(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"simple";return"object"==typeof n?n[t]:n}function c(n,t){if(n.length){var e=n.shift(),r=c(n,t);return e.perform(r)}return i(t)}var r=function n(t,e,r){s(this,n),this.name=t,this.perform=e,this.performAsync=r},f=function(n){function f(n,t,e,r){s(this,f);for(var u=arguments.length,i=Array(4<u?u-4:0),o=4;o<u;o++)i[o-4]=arguments[o];var c=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,i));return Error.captureStackTrace&&Error.captureStackTrace(c,f),c.rule=n,c.value=t,c.cause=e,c.target=r,c}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(f,Error),f}(),t=function(){function e(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];s(this,e),this.chain=n,this.nextRuleModifiers=t}return n(e,[{key:"_applyRule",value:function(r,u){var i=this;return function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return i.chain.push(new o(u,r.apply(i,t),t,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}}},{key:"_applyModifier",value:function(n,t){return this.nextRuleModifiers.push(new r(t,n.simple,n.async)),this}},{key:"_clone",value:function(){return new e(this.chain.slice(),this.nextRuleModifiers.slice())}},{key:"test",value:function(t){return this.chain.every(function(n){return n._test(t)})}},{key:"testAll",value:function(e){var r=[];return this.chain.forEach(function(t){try{t._check(e)}catch(n){r.push(new f(t,e,n))}}),r}},{key:"check",value:function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new f(t,e,n)}})}},{key:"testAsync",value:function(e){var r=this;return new Promise(function(n,t){!function n(t,e,r,u){if(e.length){var i=e.shift();i._testAsync(t).then(function(){n(t,e,r,u)},function(n){u(new f(i,t,n))})}else r(t)}(e,r.chain.slice(),n,t)})}}]),e}();function e(){return function r(u){return new Proxy(u,{get:function(n,t){if(t in n)return n[t];var e=r(u._clone());return t in l?e._applyModifier(l[t],t):t in a?e._applyRule(a[t],t):t in h?e._applyRule(h[t],t):void 0}})}(new t)}var a={};e.extend=function(n){Object.assign(a,n)},e.clearCustomRules=function(){a={}};var l={not:{simple:function(t){return function(n){return!t(n)}},async:function(t){return function(n){return Promise.resolve(t(n)).then(function(n){return!n}).catch(function(n){return!0})}}},some:{simple:function(t){return function(n){return u(n).some(function(n){try{return t(n)}catch(n){return!1}})}},async:function(t){return function(n){return Promise.all(u(n).map(function(n){try{return t(n).catch(function(n){return!1})}catch(n){return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(n){return u(n).every(t)}},async:function(t){return function(n){return Promise.all(u(n).map(t)).then(function(n){return n.every(Boolean)})}}}};function u(n){return"string"==typeof n?n.split(""):n}var h={equal:function(t){return function(n){return n==t}},exact:function(t){return function(n){return n===t}},number:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return function(n){return"number"==typeof n&&(t||isFinite(n))}},integer:function(){return function(n){return(Number.isInteger||p)(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return y("string")},boolean:function(){return y("boolean")},undefined:function(){return y("undefined")},null:function(){return y("null")},array:function(){return y("array")},object:function(){return y("object")},instanceOf:function(t){return function(n){return n instanceof t}},pattern:function(t){return function(n){return t.test(n)}},lowercase:function(){return function(n){return/^([a-z]+\s*)+$/.test(n)}},uppercase:function(){return function(n){return/^([A-Z]+\s*)+$/.test(n)}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(t){return function(n){return n[0]==t}},last:function(t){return function(n){return n[n.length-1]==t}},empty:function(){return function(n){return 0===n.length}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(n){return n.length>=t}},maxLength:function(t){return function(n){return n.length<=t}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return 0<=n}},between:function(t,e){return function(n){return t<=n&&n<=e}},range:function(t,e){return function(n){return t<=n&&n<=e}},lessThan:function(t){return function(n){return n<t}},lessThanOrEqual:function(t){return function(n){return n<=t}},greaterThan:function(t){return function(n){return t<n}},greaterThanOrEqual:function(t){return function(n){return t<=n}},even:function(){return function(n){return n%2==0}},odd:function(){return function(n){return n%2!=0}},includes:function(t){return function(n){return~n.indexOf(t)}},schema:function(n){return u=n,{simple:function(e){var r=[];if(Object.keys(u).forEach(function(t){var n=u[t];try{n.check((e||{})[t])}catch(n){n.target=t,r.push(n)}}),0<r.length)throw r;return!0},async:function(e){var r=[],n=Object.keys(u).map(function(t){var n=u[t];return n.testAsync((e||{})[t]).catch(function(n){n.target=t,r.push(n)})});return Promise.all(n).then(function(n){if(0<r.length)throw r;return!0})}};var u},passesAnyOf:function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(t){return e.some(function(n){return n.test(t)})}},optional:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(n){return e&&"string"==typeof n&&""===n.trim()||null!=n&&t.check(n),!0}}};function y(t){return function(n){return Array.isArray(n)&&"array"===t||null===n&&"null"===t||typeof n===t}}function p(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}return e});
//# sourceMappingURL=v8n.min.js.map
